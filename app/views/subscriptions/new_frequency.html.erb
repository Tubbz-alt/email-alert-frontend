<% content_for :title, t("subscriptions.new_frequency.question") + ' - ' + @title %>

<% content_for :back_link do %>
  <%= render "govuk_publishing_components/components/back_link", {
    href: @back_url
  } %>
<% end %>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

  <% if flash[:error] %>
      <%= render "govuk_publishing_components/components/error_summary", {
        title: t('subscriptions.new_frequency.general_problem'),
        items: [
          {
            text: t('subscriptions.new_frequency.required_question'),
            href: "#email-frequency-input",
          }
        ]
      } %>
    <% end %>

    <%= form_tag(subscription_frequency_path,
      class: "checklist-email-signup",
      data: {
        module: "track-email-alert-signup-choices",
        track_category: "email_subscriptions",
        track_action: 'new_address',
      }) do %>
      <%= hidden_field_tag :topic_id, @topic_id %>

      <%= render "govuk_publishing_components/components/radio", {
        name: "frequency",
        id: "email-frequency-input",
        heading: t("subscriptions.new_frequency.question"),
        is_page_heading: true,
        heading_size: "l",
        error_message: flash[:error],
        items: frequencies
      } %>

      <%= render "govuk_publishing_components/components/inset_text", {
        text: "<p>You can unsubscribe from emails or change your subscription at any time.</p>".html_safe
      } %>

      <%= render "govuk_publishing_components/components/button", {
        text: "Continue",
        margin_bottom: true
      } %>
    <% end %>
  </div>
</div>
